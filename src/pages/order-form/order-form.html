<!--
  Generated template for the OrderFormPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
    <ion-navbar>
        <ion-title>{{ pageTitle }}</ion-title>

        <ion-buttons end>
            <button ion-button icon-only (click)="create()">
                <ion-icon name="checkmark-circle-outline"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>

<ion-content>
    <div class="list-item">
        <ion-list>
            <ion-item>
                <div class="field-form-label">Cliente</div>

                <select-searchable
                        [(ngModel)]="customer"
                        itemValueField="id"
                        itemTextField="name"
                        title="Cliente"
                        [items]="customer"
                        (onSearch)="searchCustomers($event)"
                        (onChange)="searchCustomerLists($event)"
                        [canSearch]="true">
                </select-searchable>
            </ion-item>

            <ion-item *ngIf="lists.length != 0">
                <ion-label stacked>Lista de Pedidos</ion-label>
                <ion-select (ionChange)="loadList($event)">
                    <ion-option value="{{ list.id }}" *ngFor="let list of lists">{{ list.title }}</ion-option>
                </ion-select>
            </ion-item>

            <ion-item>
                <button ion-button color="light" full (click)="loadProductModal()">Adicionar Produto</button>
            </ion-item>
        </ion-list>

        <ion-list class="product-list">
            <ion-item *ngFor="let product of order">
                <ion-avatar item-start>
                    <img src="http://www.placehold.it/60" alt="">
                </ion-avatar>

                <p class="highlight">{{ product.name }}</p>
                <p>Quantidade: {{ product.quantity }}</p>
                <p>Preço Un: R$ {{ product.price }}</p>
                <p>Preço Total: R$ {{ product.price * product.quantity }}</p>
            </ion-item>

            <ion-item *ngIf="order.length == 0">
                Nenhum produto adicionado
            </ion-item>
        </ion-list>
    </div>
</ion-content>
